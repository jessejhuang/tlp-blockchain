<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>


<div align = "center">
  <body>
  <p>
    <h2>TLP BLOCKCHAIN</h2>
    <form id = "myForm" action="parse.html" method="POST">


    <div class="form-group">
        Check Number:
        <input type="text" id="input" name = "CheckNumber">
      </div>
      
      <div class="form-group">
        Previous Hash
        <input type="text" id="input" name = "PreviousHash">
      </div>
      <div class="form-group">
        Sender
        <input type="text" id="input" name = "Sender">
      </div>
      
      <div class="form-group">
        Recipient
        <input type="text" id="input" name = "Recipient">
    </div>

    <input type="submit" name='submit' value='Add Block' class="btn btn-primary">

    </form>
  </p>

  </body>

  <button type="button" onclick="loadDoc()" class="btn btn-primary">View Blockchain</button>
  <!-- when this button is pressed, it needs to GET the text from ngrok, parse it, and make a 
  bloc -->


</div>


<script>

// function myFunction() {
//   document.getElementById("myForm").submit();
// }

//idk if this works :)

window.addEventListener("load", function () {
  function sendData() {
    var XHR = new XMLHttpRequest();

    // Bind the FormData object and the form element
    var FD = new FormData(form);


    var jsonString = 'data = {'block':' + '/n' + 
              ''sender':'cory',' + 
               ''recipient':'baria',' + 
               ''check_number':12345,' + 
               ''amount':12.33'+
               '}' + 
               
               ',' + 
        ''seen_nodes':[]' + 
      '}'




    // data = {'block':
    //           {'sender':'cory',
    //            'recipient':'baria',
    //            'check_number':12345,
    //            'amount':12.33
    //            }
    //            ,
    //    'seen_nodes':[]
    //    }

    // Define what happens on successful data submission
    XHR.addEventListener("load", function(event) {
      alert(event.target.responseText);
    });

    // Define what happens in case of error
    XHR.addEventListener("error", function(event) {
      alert('Oops! Something went wrong.');
    });

    // Set up our request
    //post to a middle point
    XHR.open("POST", "http://0a9e8112.ngrok.io/");

    // The data sent is what the user provided in the form
    // XHR.send(FD);
    XHR.send(jsonString);
  }
 
  // Access the form element
  var form = document.getElementById("myForm");

  // ...and take over its submit event.
  form.addEventListener("submit", function (event) {
    event.preventDefault();

    sendData();
  });
});




var request = new XMLHttpRequest();
request.onreadystatechange = function() {
    if (request.readyState === 4) {
        if (request.status === 200) {
            document.body.className = 'ok';
            console.log(request.responseText);
        } else if (!isValid(this.response) && this.status == 0) {
            document.body.className = 'error offline';
            console.log("The computer appears to be offline.");                
        } else {
            document.body.className = 'error';
        }
    }
};
request.open("GET", "http://e2985cbf.ngrok.io",true);
request.send(null);
</script>


















<!-- 


<!DOCTYPE html>
<html>
<body>
 -->

<!-- <button type="button" onclick="loadDoc()" class="btn btn-primary">View Blockchain</button>
 -->
<!-- <p id="demo"></p>
 -->
<!-- <script>
function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML = this.responseText;

    }
  };
  xhttp.open("GET", "http://0a9e8112.ngrok.io/", true);
  xhttp.send();
}
</script> -->



<!-- 

 
</body>
</html>



 -->
<!-- 

// var obj = JSON.parse(filename);

// document.getElementById("demo").innerHTML = obj.firstName;
  

  // Chain: [Check Number:  None Timestamp: 2018-07-26 13:26:25 Prev Hash:  00000000 Sender:  None Recipient: None Amount:  None ] Peers: [u'http://67.205.135.0:6000', u'http://6e6cdcb1.ngrok.io', u'https://6e6cdcb1.ngrok.io', u'23.99.178.214', u'http://c536113b.ngrok.io', u'http://c7b052e4.ngrok.io', u'https://c7b052e4.ngrok.io', u'http://5313cb9b.ngrok.io', u'http://d943c455.ngrok.io', u'http://90935a1a.ngrok.io', u'https://90935a1a.ngrok.io', u'https://db048355.ngrok.io', u'http://db048355.ngrok.io', u'https://a41c4790.ngrok.io', u'http://91fed98d.ngrok.io', u'http://0a9e8112.ngrok.io', u'https://0a9e8112.ngrok.io'] Last Hash: b724392c0cf1794c114f1aaa65523f0771d880e89d63be81b2d84a17ad15eea6


  //get request



  var text = JSON.parse(filename);
 -->